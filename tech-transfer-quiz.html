<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Tech Transfer - Rammed Earth</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%238B4513' x='10' y='30' width='80' height='40' rx='2'/><rect fill='%23CD853F' x='10' y='35' width='80' height='8'/><rect fill='%23D2691E' x='10' y='48' width='80' height='8'/><rect fill='%23F4A460' x='10' y='61' width='80' height='4'/></svg>">
    <meta property="og:title" content="Professional Tech Transfer - Rammed Earth">
    <meta property="og:description" content="Knowledge transfer for professionals wanting to build rammed earth capability">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://rammedearth.in/tech-transfer-quiz.html">
    <meta property="og:image" content="https://rammedearth.in/re.png">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Georgia, serif;
            line-height: 1.6;
            color: #3E2723;
            background: #F5F2E8;
            padding: 20px;
            max-width: 700px;
            margin: 0 auto;
        }
        .container {
            background: white;
            padding: 40px 30px;
            border-radius: 3px;
            box-shadow: 0 4px 12px rgba(139, 69, 19, 0.1);
            margin-bottom: 30px;
        }
        h1 {
            font-size: 1.9em;
            margin-bottom: 10px;
            font-weight: normal;
            color: #8B4513;
            text-align: center;
        }
        .subtitle {
            font-style: italic;
            color: #D2691E;
            margin-bottom: 30px;
            font-size: 1.1em;
            text-align: center;
        }
        .logo {
            max-width: 100%;
            height: auto;
            max-height: 120px;
            margin: 0 auto 20px;
            display: block;
        }
        .intro-box {
            margin-bottom: 25px;
            padding: 20px;
            background: #FFF8E1;
            border-left: 4px solid #D2691E;
            font-size: 0.95em;
        }
        .question-block {
            margin-bottom: 25px;
        }
        .question {
            font-size: 1.1em;
            color: #8B4513;
            margin-bottom: 10px;
            font-weight: normal;
        }
        textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #D2691E;
            border-radius: 3px;
            font-family: Georgia, serif;
            font-size: 0.95em;
        }
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        input[type="email"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #D2691E;
            border-radius: 3px;
            font-family: Georgia, serif;
            font-size: 0.95em;
            margin-bottom: 20px;
        }
        .terms-checkbox {
            margin: 20px 0;
            font-size: 0.9em;
        }
        .terms-checkbox input {
            margin-right: 8px;
        }
        .submit-btn {
            background: #8B4513;
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 3px;
            font-family: Georgia, serif;
            font-size: 1.1em;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
        }
        .submit-btn:hover {
            background: #6D3410;
        }
        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .back-link {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #CD853F;
        }
        .back-link a {
            color: #8B4513;
            text-decoration: none;
            font-style: italic;
        }
        .back-link a:hover {
            color: #D2691E;
        }
        @media (max-width: 600px) {
            body { padding: 10px; }
            .container { padding: 25px 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="re.png" alt="The Rammed Earth Chronicles" class="logo">
        
        <h1>Professional Tech Transfer</h1>
        <div class="subtitle">For architects, engineers, and builders</div>
        
        <div class="intro-box">
            <strong>This is knowledge transfer, not project execution.</strong> Detailed responses help us understand your readiness and commitment. Brief answers make it difficult to assess fit.
        </div>
        
        <form id="tech-transfer-form">
            <div class="question-block">
                <div class="question">What's your role in rammed earth projects?</div>
                <select name="role" required>
                    <option value="">Select your role...</option>
                    <option value="architect">I'm the architect designing it</option>
                    <option value="engineer">I'm the engineer consulting on it</option>
                    <option value="builder">I'm a builder wanting to add this skill</option>
                    <option value="contractor">I'm a contractor looking for subcontractors</option>
                    <option value="representative">I'm representing a client who wants to build</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <div class="question-block">
                <div class="question">Describe your hands-on experience with building materials OR your willingness to get personally involved.</div>
                <textarea name="hands-on" placeholder="Past experience: What materials? What did you learn physically? OR Future willingness: Are you ready to get your hands dirty learning alongside your team?" required></textarea>
            </div>
            
            <div class="question-block">
                <div class="question">What specific rammed earth technology do you want to learn?</div>
                <textarea name="technology" placeholder="Be specific: mix design, formwork systems, soil testing, construction sequencing..." required></textarea>
            </div>
            
            <div class="question-block">
                <div class="question">How will you use this knowledge?</div>
                <textarea name="application" placeholder="Training team for ongoing practice? One-time project? Adding to service offerings?" required></textarea>
            </div>

            <input type="email" name="email" placeholder="Your email" required>

            <div class="terms-checkbox">
                <input type="checkbox" id="tech-consent" required>
                <label for="tech-consent">I understand this is for knowledge transfer and requires hands-on commitment from me or my team. <a href="privacy-policy.html" style="color: #8B4513;">Privacy Policy</a></label>
            </div>

            <button type="submit" class="submit-btn">Submit Tech Transfer Inquiry</button>
        </form>
        
        <div class="back-link">
            <a href="index.html">‚Üê Back to main page</a> |
            <a href="quiz-index.html">See other paths</a>
        </div>
    </div>

    <script>
        // Helper functions
        function contextualMatch(text, keyword) {
            const lowerText = text.toLowerCase();
            const lowerKeyword = keyword.toLowerCase();
            const index = lowerText.indexOf(lowerKeyword);
            if (index === -1) return false;
            const beforeWord = index > 0 ? lowerText.substring(Math.max(0, index - 10), index) : '';
            const negationWords = ['not', 'no', 'never', 'without', "don't", "doesn't", "isn't", "aren't"];
            return !negationWords.some(neg => beforeWord.includes(neg));
        }

        function analyzeAnswerQuality(text) {
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 10);
            const words = text.split(/\s+/).filter(w => w.length > 3);
            const uniqueWords = new Set(words.map(w => w.toLowerCase()));
            
            return {
                sentenceCount: sentences.length,
                vocabularyRichness: uniqueWords.size / Math.max(words.length, 1),
                hasSpecifics: /\d+|specific|particular|exactly|precisely/.test(text.toLowerCase())
            };
        }

        // Main tech transfer analysis
        function analyzeTechTransfer(answers) {
            const [role, handsOn, technology, application] = answers;
            const debug = { scores: {}, flags: [], reasoning: [] };

            // Auto-reject patterns
            if (role === 'contractor' || role === 'representative') {
                debug.reasoning.push('Role indicates seeking contractors, not knowledge transfer');
                return { level: 'redirect-to-directory', debug };
            }

            const quickProjectPhrases = ['one project', 'single project', 'one-time', 'quick turnaround', 'urgent'];
            if (quickProjectPhrases.some(phrase => application.toLowerCase().includes(phrase))) {
                debug.reasoning.push('Application indicates one-off project, not long-term capability building');
                return { level: 'redirect-to-directory', debug };
            }

            if (technology.toLowerCase().includes('cheap') || technology.toLowerCase().includes('fast')) {
                debug.reasoning.push('Focus on speed/cost rather than knowledge depth');
                return { level: 'redirect-to-directory', debug };
            }

            if (handsOn.length < 30) {
                debug.reasoning.push('Insufficient detail about hands-on involvement');
                return { level: 'no-hands-on-response', debug };
            }

            // Check for unwillingness
            const unwillingPhrases = ['no time for', 'too busy to', 'will delegate', 'my team will handle', 'others will do', 'supervise only', 'design only'];
            const unwillingWords = ['delegate', 'supervise'];

            let hasUnwillingPhrase = unwillingPhrases.some(phrase => handsOn.toLowerCase().includes(phrase));
            let hasUnwillingContext = unwillingWords.filter(word => contextualMatch(handsOn, word)).length >= 1;

            if (hasUnwillingPhrase || (hasUnwillingContext && !handsOn.toLowerCase().includes('but') && !handsOn.toLowerCase().includes('however'))) {
                debug.reasoning.push('Indicates unwillingness for hands-on engagement');
                return { level: 'unwilling-hands-on', debug };
            }

            // Scoring
            let totalScore = 0;
            const maxScore = 20;
            let handsOnScore = 0;
            let techScore = 0;
            let appScore = 0;

            // Hands-on score (0-8)
            const willingPhrases = ['willing to', 'ready to get', 'want to learn', 'eager to', 'committed to'];
            const willingWords = ['willing', 'ready', 'hands-on', 'personally', 'myself', 'learn by doing'];

            const phraseMatches = willingPhrases.filter(p => handsOn.toLowerCase().includes(p)).length;
            const wordMatches = willingWords.filter(w => contextualMatch(handsOn, w)).length;

            if (phraseMatches >= 1 || wordMatches >= 2) {
                handsOnScore += 2;
                debug.scores.willingness = 2;
            } else if (wordMatches >= 1) {
                handsOnScore += 1;
                debug.scores.willingness = 1;
            }

            const materials = ['clay', 'mud', 'concrete', 'earth', 'soil', 'mortar', 'plaster'];
            const matMentions = materials.filter(m => handsOn.toLowerCase().includes(m)).length;
            if (matMentions >= 2) {
                handsOnScore += 2;
                debug.scores.materialExperience = 2;
            } else if (matMentions >= 1) {
                handsOnScore += 1;
                debug.scores.materialExperience = 1;
            }

            const techTerms = ['mix', 'ratio', 'water', 'compression', 'formwork', 'testing'];
            const techMentions = techTerms.filter(t => handsOn.toLowerCase().includes(t)).length;
            if (techMentions >= 2) {
                handsOnScore += 2;
                debug.scores.technicalExperience = 2;
            } else if (techMentions >= 1) {
                handsOnScore += 1;
                debug.scores.technicalExperience = 1;
            }

            const tactileWords = ['hands', 'touch', 'feel', 'experience'];
            const learningWords = ['fail', 'mistake', 'learn', 'understand'];
            if (tactileWords.some(w => handsOn.toLowerCase().includes(w))) {
                handsOnScore += 1;
                debug.scores.tactileAwareness = 1;
            }
            if (learningWords.some(w => handsOn.toLowerCase().includes(w))) {
                handsOnScore += 1;
                debug.scores.learningOrientation = 1;
            }

            const handsOnQuality = analyzeAnswerQuality(handsOn);
            if (handsOnQuality.hasSpecifics && handsOnQuality.sentenceCount >= 3) {
                handsOnScore += 1;
                debug.scores.handsOnDetail = 1;
            }

            // Technology score (0-6)
            const techAreas = ['mix design', 'soil testing', 'formwork', 'construction sequence', 'compression', 'moisture', 'curing', 'stabilization'];
            const techMatches = techAreas.filter(a => technology.toLowerCase().includes(a)).length;

            if (techMatches >= 3) {
                techScore += 3;
                debug.scores.technicalBreadth = 3;
            } else if (techMatches >= 2) {
                techScore += 2;
                debug.scores.technicalBreadth = 2;
            } else if (techMatches >= 1) {
                techScore += 1;
                debug.scores.technicalBreadth = 1;
            }

            if (/how to|how do|what is|understanding|learn about/i.test(technology)) {
                techScore += 1;
                debug.scores.specificQuestions = 1;
            }

            const techQuality = analyzeAnswerQuality(technology);
            if (techQuality.sentenceCount >= 3 && technology.length > 100) {
                techScore += 2;
                debug.scores.technicalDetail = 2;
            } else if (technology.length > 60) {
                techScore += 1;
                debug.scores.technicalDetail = 1;
            }

            // Application score (0-6)
            const longTermWords = ['practice', 'ongoing', 'long-term', 'capability', 'building', 'develop', 'integrate'];
            const ltMatches = longTermWords.filter(w => contextualMatch(application, w)).length;

            if (ltMatches >= 3) {
                appScore += 3;
                debug.scores.longTermCommitment = 3;
            } else if (ltMatches >= 2) {
                appScore += 2;
                debug.scores.longTermCommitment = 2;
            } else if (ltMatches >= 1) {
                appScore += 1;
                debug.scores.longTermCommitment = 1;
            }

            if (/team|staff|organization|company|practice/i.test(application)) {
                appScore += 1;
                debug.scores.organizationalContext = 1;
            }

            if (/skill|knowledge|capability|expertise|competence/i.test(application)) {
                appScore += 1;
                debug.scores.professionalGrowth = 1;
            }

            const appQuality = analyzeAnswerQuality(application);
            if (appQuality.hasSpecifics && appQuality.sentenceCount >= 2) {
                appScore += 1;
                debug.scores.applicationDetail = 1;
            }

            totalScore = handsOnScore + techScore + appScore;
            const percentScore = (totalScore / maxScore) * 100;
            
            debug.totalScore = totalScore.toFixed(1);
            debug.maxScore = maxScore;
            debug.percentScore = percentScore.toFixed(1);
            debug.breakdown = {
                handsOn: `${handsOnScore}/8`,
                technology: `${techScore}/6`,
                application: `${appScore}/6`
            };

            // Determine level
            let level;
            if (percentScore >= 65) {
                level = 'qualified-professional';
                debug.reasoning.push('Strong professional readiness - hands-on commitment, technical specificity, and long-term vision');
            } else if (percentScore >= 45) {
                level = 'developing-professional';
                debug.reasoning.push('Genuine professional interest with room to strengthen commitment or specificity');
            } else if (percentScore >= 30) {
                level = 'willing-beginner-professional';
                debug.reasoning.push('Shows willingness but needs more hands-on foundation or technical clarity');
            } else {
                level = 'not-qualified';
                debug.reasoning.push('Insufficient readiness for professional knowledge transfer at this time');
            }

            if (percentScore >= 40 && percentScore <= 50) {
                debug.flags.push('BORDERLINE - Recommend human review');
            }

            if (handsOnScore <= 2) {
                debug.flags.push('LOW hands-on score - may need more practical engagement');
            }
            if (techScore <= 1) {
                debug.flags.push('LOW technical specificity - unclear what they want to learn');
            }
            if (appScore <= 1) {
                debug.flags.push('LOW application clarity - unclear how knowledge will be used');
            }

            return { level, debug };
        }

        // Form submission
        document.getElementById('tech-transfer-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const form = e.target;
            const email = form.querySelector('input[type="email"]').value;
            const role = form.querySelector('select[name="role"]').value;
            const handsOn = form.querySelector('textarea[name="hands-on"]').value;
            const technology = form.querySelector('textarea[name="technology"]').value;
            const application = form.querySelector('textarea[name="application"]').value;

            const result = analyzeTechTransfer([role, handsOn, technology, application]);

            sessionStorage.setItem('techTransferEmail', email);
            sessionStorage.setItem('techTransferLevel', result.level);
            sessionStorage.setItem('techTransferScore', result.debug.percentScore);

            // Submit to Google Sheets
            try {
                await fetch('https://script.google.com/macros/s/AKfycbxn6OwS9_BXjG1DkqjK5ZsKQz0dHJBTflh1OkB8PQ9-EkbWOt6iKpvCa8wqQSXHn7gL/exec', {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        timestamp: new Date().toISOString(),
                        email: email,
                        role: role,
                        handsOn: handsOn,
                        technology: technology,
                        application: application,
                        level: result.level,
                        score: result.debug.percentScore,
                        breakdown: JSON.stringify(result.debug.breakdown),
                        flags: result.debug.flags.join('; '),
                        reasoning: result.debug.reasoning.join('; ')
                    })
                });
            } catch (error) {
                console.error('Submission error:', error);
            }

            // Redirect
            const landingPages = {
                'redirect-to-directory': 'consultation-wants-contractor.html',
                'unwilling-hands-on': 'consultation-wants-contractor.html',
                'qualified-professional': 'tech-transfer-qualified-professional.html',
                'developing-professional': 'tech-transfer-developing-professional.html',
                'willing-beginner-professional': 'tech-transfer-willing-beginner.html',
                'not-qualified': 'tech-transfer-not-qualified.html',
                'no-hands-on-response': 'tech-transfer-not-qualified.html'
            };

            window.location.href = landingPages[result.level];
        });
    </script>
</body>
</html>
